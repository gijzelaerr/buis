{% extends "base.html" %}

{% block content %}
    <h2>Repository #{{ object.id }} details</h2>

    <ul>
        <li>name: {{ object.name }}</li>
        <li>url: {{ object.url }}</li>
    </ul>

    <div class="table-responsive">
        <table class="table table-striped table-sm">
            <thead>
            <th scope="col">moment</th>
            <th scope="col">state</th>
            <th scope="col">message</th>

            </thead>
            <tbody>
            {% for change in object.state_changes.all %}
                <tr>
                    <td>{{ change.moment }}</td>
                    <td>{{ change.get_state_display }}</td>
                    <td>{{ change.message }}</td>

                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>


    {% if ls %}
        <div class="table-responsive">
            <table class="table table-striped table-sm">
                <thead>
                <th scope="col">file</th>
                <th scope="col">actions</th>
                </thead>
                <tbody>
                {% for file in ls %}
                    <tr>

                        <td>{{ file }}</td>
                        <td>
                            .py, .cwl, or .wdl.
                            <a href="{%  url 'scheduler:workflow_run' object.id file %}"><button type="button" class="btn btn-success">Run</button></a>
                        </td>

                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        No Workflows.
    {% endif %}


{% endblock %}